<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
</head>
<style>
    #dnd {
      border: 1px solid black;
      transition: border-color 0.3s; /* Agregamos transición para suavizar el cambio de color */
    }
    #dndTxt{
        display: none;
    }
</style>
<script>
    function allowDrop(ev) {
    ev.preventDefault();
    }

    function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    // Cambiamos el color del borde solo durante el arrastre
    document.getElementById("dnd").style.borderColor = "red";
    }

    function dragend() {
    // Restauramos el color del borde al finalizar el arrastre
    document.getElementById("dnd").style.borderColor = "black";
}

function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            // Restauramos el color del borde al soltar el elemento
            document.getElementById("dnd").style.borderColor = "black";

            // Obtenemos el elemento movido
            var draggedElement = document.getElementById(data);
            
            // Creamos un nuevo elemento clonado para insertar en el área de "drag and drop"
            var clonedElement = draggedElement.cloneNode(true);
            clonedElement.id = "cloned-" + data;  // Cambiamos el ID para evitar duplicados
            
            // Insertamos el elemento clonado en el área de "drag and drop"
            document.getElementById("dnd").appendChild(clonedElement);

            // Muestra el texto oculto después de soltar el elemento
            document.getElementById("dndTxt").style.display = "block";
        }
</script>

<body>
    <div class="container">
        <div class="card">
        <div class="row">
            <div class="col-9 left">
                <div class="row top">
                    <div class="col fw-bold">${nombre}</div>
                    <div class="col"><span id="fecha">${fechaHoy}</span></div>
                </div>
                <div class="row">
                    <div class="col-7 temp">11&deg;</div>
                    <div class="col-5 time"><p>${obtenerHoraActual()}:00</p><h2><b>${diaDeLaSemana}</b></h2><p class="descripcion">${data[0]['descripcion']}.</p></div>
                </div>
                <div class="row prec" id="dnd" ondrop="drop(event)" ondragover="allowDrop(event)">
                  <div class="col-12"><i class="fa-solid fa-wind"></i> ${data[0]['viento']} KM/h</div>
                  <div class="col-12"><i class="fa-solid fa-droplet"></i> ${data[0]['humedad']}%</div>
                </div>
                <div class="row bottom">
                    <div class="col"><hr></div>
                    <div class="col border">
                        <div class="row">Sab</div>
                        <div class="row"><b>-4&deg;</b></div>
                    </div>
                    <div class="col">
                        <div class="row">Dom</div>
                        <div class="row"><b>-4&deg;</b></div>
                    </div>
                    <div class="col">
                        <div class="row">Lun</div>
                        <div class="row"><b>-5&deg;</b></div>
                    </div>
                    <div class="col">
                        <div class="row">Mar</div>
                        <div class="row"><b>-10&deg;</b></div>
                    </div>
                    <div class="col">
                        <div class="row">Mie</div>
                        <div class="row"><b>-4&deg;</b></div>
                    </div>
                    <div class="col">
                        <div class="row">Jue</div>
                        <div class="row"><b>-2&deg;</b></div>
                    </div>
                    <div class="col">
                        <div class="row">Vie</div>
                        <div class="row"><b>0&deg;</b></div>
                    </div>
                    <div class="col"><hr></div>
                </div>
            </div>
            <div class="col-3 right">
                <div class="row top" style="margin-right: 10.5em;">Gráficas</div>
                  <div class="row">
  
                    <div>
                      <div class="top text-center">
  
                        <div>
                          <label for="desde">Desde</label>
                          <input type="date" name="" id="desde">
                        </div>
  
                        
                        <label for="hasta">Hasta</label>
                        <input type="date" name="" id="hasta">
                      </div>
                      <canvas id="myChart"></canvas>
                    </div>
  
                    <div class="bottom da text-center">
                      <span class="top">Dias anteriores</span>
                        <div class="col border">
                          <div class="row">Sab</div>
                          <div class="row"><b>-4&deg;</b></div>
                        </div>
                        <div class="col border">
                          <div class="row">Dom</div>
                          <div class="row"><b>3&deg;</b></div>
                        </div>
                        <div class="col border">
                          <div class="row">Lun</div>
                          <div class="row"><b>-3&deg;</b></div>
                        </div>
                        <div class="col border">
                          <div class="row">Mar</div>
                          <div class="row"><b>1&deg;</b></div>
                        </div>
                        <div class="col border">
                          <div class="row">Mie</div>
                          <div class="row"><b>2&deg;</b></div>
                        </div>
                    </div>
                    
                    <script src="js/grafica.js"></script>
                  </div>
                </div>
            </div>
        </div>
        <div class="dnd" id="dnd" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="viento" id="prueba" draggable="true" ondragstart="drag(event)" ondragend="dragend()">
                <i class="fa-solid fa-wind"></i>${data[0]['viento']} KM/h
            </div>
            <div class="humedad" id="prueba" draggable="true" ondragstart="drag(event)" ondragend="dragend()">
                <i class="fa-solid fa-droplet"></i>${data[0]['humedad']}%
            </div>
        </div>
    </div>
</body> 
</html>